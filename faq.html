<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>10. Frequently Asked Questions &#8212; bamm 2.5.0 documentation</title>
    
    <link rel="stylesheet" href="_static/bamm.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '2.5.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="11. Is the posterior on the number of shifts overly sensitive to the prior?" href="prior.html" />
    <link rel="prev" title="9. Color ramps and phylorate plots" href="colorbreaks.html" /> 
  </head>
  <body role="document">
<div class="pageheader">
    <img src="_static/bamm-header.png" /img>
</div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="prior.html" title="11. Is the posterior on the number of shifts overly sensitive to the prior?"
             accesskey="N">next</a></li>
        <li class="right" >
          <a href="colorbreaks.html" title="9. Color ramps and phylorate plots"
             accesskey="P">previous</a> |</li>
<li><a href="index.html">Home</a>&nbsp;|</li>
<li><a href="download.html">Download</a>&nbsp;|</li>
<li><a href="documentation.html">Documentation</a>&nbsp;|</li>
<li><a href="contact_us.html">Contact Us</a></li>
 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="documentation.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">10. Frequently Asked Questions</a><ul>
<li><a class="reference internal" href="#general">10.1. General</a><ul>
<li><a class="reference internal" href="#how-do-i-cite-bamm">10.1.1. How do I cite BAMM?</a></li>
<li><a class="reference internal" href="#how-much-data-does-it-need">10.1.2. How much data does it need?</a></li>
<li><a class="reference internal" href="#how-often-should-i-sample-the-chain">10.1.3. How often should I sample the chain?</a></li>
<li><a class="reference internal" href="#how-many-generations-should-i-expect-to-run-bamm-for">10.1.4. How many generations should I expect to run BAMM for?</a></li>
<li><a class="reference internal" href="#what-extensions-are-underway-for-bamm">10.1.5. What extensions are underway for BAMM?</a></li>
<li><a class="reference internal" href="#what-is-the-actual-model-implemented-in-bamm-for-time-varying-rates">10.1.6. What is the actual model implemented in BAMM for time-varying rates?</a></li>
<li><a class="reference internal" href="#how-can-bamm-detect-diversity-dependent-changes-in-speciation-rates">10.1.7. How can BAMM detect diversity-dependent changes in speciation rates?</a></li>
<li><a class="reference internal" href="#why-does-my-phylorate-plot-not-show-variation-when-i-know-there-are-significant-rate-shifts-in-my-dataset">10.1.8. Why does my phylorate plot not show variation when I know there are significant rate shifts in my dataset?</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="colorbreaks.html"
                        title="previous chapter">9. Color ramps and phylorate plots</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="prior.html"
                        title="next chapter">11. Is the posterior on the number of shifts overly sensitive to the prior?</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/faq.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="frequently-asked-questions">
<h1>10. Frequently Asked Questions<a class="headerlink" href="#frequently-asked-questions" title="Permalink to this headline">¶</a></h1>
<div class="section" id="general">
<h2>10.1. General<a class="headerlink" href="#general" title="Permalink to this headline">¶</a></h2>
<div class="section" id="how-do-i-cite-bamm">
<h3>10.1.1. How do I cite BAMM?<a class="headerlink" href="#how-do-i-cite-bamm" title="Permalink to this headline">¶</a></h3>
<p>The primary methodological description of the full BAMM model was published in <em>PLoS ONE</em>. A link to the paper is <a class="reference external" href="http://www.plosone.org/article/info%3Adoi%2F10.1371%2Fjournal.pone.0089543">available here</a>.</p>
<p>This paper contains a description of the model, the reversible jump MCMC implementation, a comprehensive performance evaluation, and an empirical application. An earlier paper used a related implementation that assumed constant rates of diversification through time within evolutionary rate regimes (<a class="reference external" href="http://www.nature.com/ncomms/2013/130606/ncomms2958/full/ncomms2958.html">Rabosky et al. 2013</a>).</p>
<p>Macroevolutionary cohort analyses were described and published in <a class="reference external" href="http://sysbio.oxfordjournals.org/content/63/4/610">Systematic Biology 2014</a>. The MC3 implementation of BAMM, and the usage of Bayes factors for assessing evidence in favor of rate shifts, were published in <a class="reference external" href="http://onlinelibrary.wiley.com/doi/10.1111/evo.12681/abstract">Evolution 2015</a>.</p>
<p>If you use BAMMtools for analysis and visualization of BAMM results, you should cite the <a class="reference external" href="http://onlinelibrary.wiley.com/doi/10.1111/2041-210X.12199/abstract">BAMMtools package</a>.</p>
</div>
<div class="section" id="how-much-data-does-it-need">
<h3>10.1.2. How much data does it need?<a class="headerlink" href="#how-much-data-does-it-need" title="Permalink to this headline">¶</a></h3>
<p><strong>Not much</strong>. There is no general rule here, but if your dataset is large enough to consider doing any other sort of diversification analysis, then it is probably large enough for BAMM. The whale diversification analysis shown in the <a class="reference internal" href="bammgraph.html#bammgraphs"><span class="std std-ref">graph gallery</span></a> uses a time-calibrated tree with 89 tips. We&#8217;ve had good success using BAMM on trees that are considerably smaller than this.</p>
</div>
<div class="section" id="how-often-should-i-sample-the-chain">
<span id="howmanyevents"></span><h3>10.1.3. How often should I sample the chain?<a class="headerlink" href="#how-often-should-i-sample-the-chain" title="Permalink to this headline">¶</a></h3>
<p>Your first consideration should be: for how long should I run the chain? The answer to this question has a lot to do with how quickly the chain converges and how well it samples the posterior. We suggest that there is little advantage in going to more than 5000 samples from the posterior, and potentially large costs: for large datasets, sampling too frequently with BAMM can literally generate gigabytes of highly autocorrelated and mostly-unusable output. Moreover, due to memory issues with R, BAMMtools cannot handle output files of that size. So, pick a chain length (e.g., <img class="math" src="_images/math/9ef688bfa7c01db65bded6f3ebdee27258b0dec1.png" alt="10^7"/> generations), and then specify a sample frequency that should give you somewhere between 500 and 5000 samples from the posterior after burnin.</p>
</div>
<div class="section" id="how-many-generations-should-i-expect-to-run-bamm-for">
<h3>10.1.4. How many generations should I expect to run BAMM for?<a class="headerlink" href="#how-many-generations-should-i-expect-to-run-bamm-for" title="Permalink to this headline">¶</a></h3>
<p>This section is just to provide some ballpark numbers and general guidelines. For relatively small datasets (&lt; 1000 taxa), you may observe good performance with less than 10 million generations. For datasets in the thousands of taxa, don&#8217;t be surprised if you need 100 million or more generations to adequately sample the posterior. BAMM 2.0 includes Metropolis coupling (MC3), which we have found to considerably boost performance. See documentation on this feature to ensure that you are using it to its full potential.</p>
</div>
<div class="section" id="what-extensions-are-underway-for-bamm">
<h3>10.1.5. What extensions are underway for BAMM?<a class="headerlink" href="#what-extensions-are-underway-for-bamm" title="Permalink to this headline">¶</a></h3>
<p>We are currently testing extensions of BAMM that allow modeling evolutionary dynamics under a much greater range of phenotypic evolutionary scenarios, as well as the incorporation of paleontological data. Bleeding edge releases of BAMM can be obtained from our <a class="reference external" href="https://github.com/macroevolution/bamm">GitHub page</a>.</p>
</div>
<div class="section" id="what-is-the-actual-model-implemented-in-bamm-for-time-varying-rates">
<h3>10.1.6. What is the actual model implemented in BAMM for time-varying rates?<a class="headerlink" href="#what-is-the-actual-model-implemented-in-bamm-for-time-varying-rates" title="Permalink to this headline">¶</a></h3>
<p>The model originally described for time-varying macroevolutionary rate regimes (e.g., <a class="reference external" href="http://www.plosone.org/article/info%3Adoi%2F10.1371%2Fjournal.pone.0089543">Rabosky 2014</a>) used a simple exponential change function for rates through time:</p>
<div class="math">
<p><img src="_images/math/d38baee9e5ba3441cc008f5058a245789b606b95.png" alt="\lambda(t) = \lambda_{0}e^{k t}"/></p>
</div><p>We have since come to recognize that this model is not ideal, because it is highly asymmetric with respect to increasing (k &gt; 0) and decreasing (k &lt; 0) rates through time. Specifically, the prior we place on <em>k</em> is symmetric (normal), but the rates are not. The problem, put simply, is that negative values of <em>k</em> can only decrease the evolutionary rate to zero. However, positive values - even of equivalent absolute value - can lead to extremely large values. Just consider the values of the exponential function above evaluated at <img class="math" src="_images/math/051bc3ec06bd3f8d047c193e85463ee6336dec6b.png" alt="\lambda_{0} = 1"/>, <img class="math" src="_images/math/e183f1a850350e9dbeedd8d16f87b511e5893c82.png" alt="t = 1"/>, <img class="math" src="_images/math/814136af5784bcb52cae4941fc641b1cf5d2a24e.png" alt="k = -10"/> and <img class="math" src="_images/math/67a8e2229ead68d7445823d5574b9c0271d60f55.png" alt="k = 10"/>.  With <em>k = -10</em>, the value of the rate function approaches zero, but with <em>k = +10</em>, it is 22026.47. Yet both of these <em>k</em> values have equal prior densities.</p>
<p>We thus modified the exponential change function to make it symmetric. For <em>k &lt; 0</em>, we use the exponential change function defined above. For <em>k &gt; 0</em>, we use the function</p>
<div class="math">
<p><img src="_images/math/73b6362d6cfb3561a264a000f2a7c0381ee8e9e5.png" alt="\lambda(t) = \lambda_{0} (2 - e^{-k t})"/></p>
</div><p>If <em>k &gt; 0</em>, this function asymptotically approaches the limiting value <img class="math" src="_images/math/9dff200ab757129e2f3e916bb46ecf3198f3bb5c.png" alt="2\lambda_{0}"/>.</p>
<p>This has the nice property that the function <img class="math" src="_images/math/e9014ef0b51d1b1d968db80f8f90e5fea9518b97.png" alt="\lambda(t)"/> is symmetric about the line <img class="math" src="_images/math/253e1f2e06dd8938ad8f3777b1218fa0cf271910.png" alt="x = \lambda_{0}"/>, for positive and negative values of k with the same absolute value.</p>
<p>Note that in BAMM v2.0, the model allows &#8220;flipping&#8221; between time-constant and time-varying diversification modes. The theory underlying this new proposal class is described <a class="reference internal" href="time-flip.html#timefliptheory"><span class="std std-ref">here</span></a>. Hence, the model does not assume that diversification shifts result in a new time-varying diversification process, but allows for such processes if they are supported by the data.</p>
</div>
<div class="section" id="how-can-bamm-detect-diversity-dependent-changes-in-speciation-rates">
<h3>10.1.7. How can BAMM detect diversity-dependent changes in speciation rates?<a class="headerlink" href="#how-can-bamm-detect-diversity-dependent-changes-in-speciation-rates" title="Permalink to this headline">¶</a></h3>
<p>BAMM models the dynamics of speciation and extinction within rate regimes using an exponential change function described in the preceding section. Theoretically, a linear <em>diversity-dependent</em> change in speciation rates through time leaves a signal in molecular phylogenies that is virtually indistinguishable from an exponential <em>time-dependent</em> change in rates. Our analyses of simulated datasets suggest that these two types of models are not distinguishable in practice.</p>
<p>We have conducted extensive performance evaluations where we have simulated datasets under formal <em>diversity-dependent</em> scenarios, then used BAMM to reconstruct the number of macroevolutionary rate regimes as well as the dynamics of speciation and extinction through time. Our simulations indicate that BAMM can estimate both the number of distinct macroevolutionary regimes, as well as the underlying evolutionary rates, even though we are using the exponential approximation to the diversity-dependent process. We have published these results <a class="reference external" href="http://www.plosone.org/article/info%3Adoi%2F10.1371%2Fjournal.pone.0089543">here</a>.</p>
<p>It is (vastly) more efficient computationally to work with the exponential change model than the formal diversity-dependent model, and calculations of single likelihoods on phylogenies can be many orders of magnitude faster with the exponential approximation than with the formal diversity-dependent model. The multi-process explorations of macroevolutionary dynamics that are possible with BAMM wouldn&#8217;t really be feasible without the ability to quickly compute likelihoods.</p>
<p>As an aside, the user is encouraged to remember that all analytically tractable models of diversity-dependence (e.g., Rabosky &amp; Lovette, <em>Proc. R. Soc. B.</em>, 2008; or Etienne <em>et. al.</em>, <em>Proc. R. Soc. B</em>, 2011) are models that we are imposing on the data: there is no reason why a true diversity-dependent process need follow a linear model.</p>
</div>
<div class="section" id="why-does-my-phylorate-plot-not-show-variation-when-i-know-there-are-significant-rate-shifts-in-my-dataset">
<h3>10.1.8. Why does my phylorate plot not show variation when I know there are significant rate shifts in my dataset?<a class="headerlink" href="#why-does-my-phylorate-plot-not-show-variation-when-i-know-there-are-significant-rate-shifts-in-my-dataset" title="Permalink to this headline">¶</a></h3>
<p>It is possible that the distribution of rates across your phylogeny is highly skewed. See <a class="reference internal" href="colorbreaks.html#colorbreaks"><span class="std std-ref">this page</span></a> for more information.</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="prior.html" title="11. Is the posterior on the number of shifts overly sensitive to the prior?"
             >next</a></li>
        <li class="right" >
          <a href="colorbreaks.html" title="9. Color ramps and phylorate plots"
             >previous</a> |</li>
<li><a href="index.html">Home</a>&nbsp;|</li>
<li><a href="download.html">Download</a>&nbsp;|</li>
<li><a href="documentation.html">Documentation</a>&nbsp;|</li>
<li><a href="contact_us.html">Contact Us</a></li>
 
      </ul>
    </div>

    <div class="footer" role="contentinfo">
        &#169; Copyright 2015 BAMM Team.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.5.2.
    </div>
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-49579863-1', 'bamm-project.org');
ga('send', 'pageview');
</script>

  </body>
</html>